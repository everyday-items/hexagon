ğŸ‰ Hexagon éƒ¨ç½²æˆåŠŸï¼

{{- $fullName := include "hexagon.fullname" . }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“¡ è®¿é—®åº”ç”¨:
{{- if .Values.ingress.enabled }}
{{- range .Values.ingress.hosts }}
  http{{ if $.Values.ingress.tls }}s{{ end }}://{{ .host }}
{{- end }}
{{- else }}
  # ä¸»åº”ç”¨ (ç«¯å£è½¬å‘)
  kubectl port-forward svc/{{ $fullName }}-app {{ .Values.app.service.port }}:{{ .Values.app.service.port }} -n {{ .Release.Namespace }}
  http://localhost:{{ .Values.app.service.port }}

{{- if .Values.devui.enabled }}
  # Dev UI (ç«¯å£è½¬å‘)
  kubectl port-forward svc/{{ $fullName }}-devui {{ .Values.devui.service.port }}:{{ .Values.devui.service.port }} -n {{ .Release.Namespace }}
  http://localhost:{{ .Values.devui.service.port }}
{{- end }}
{{- end }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”§ åŸºç¡€è®¾æ–½:
{{- if .Values.qdrant.enabled }}
  Qdrant (å†…ç½®):   {{ $fullName }}-qdrant:{{ .Values.qdrant.service.httpPort }}
{{- else }}
  Qdrant (å¤–éƒ¨):   {{ .Values.external.qdrant.url }}
{{- end }}
{{- if .Values.redis.enabled }}
  Redis  (å†…ç½®):   {{ $fullName }}-redis:{{ .Values.redis.service.port }}
{{- else }}
  Redis  (å¤–éƒ¨):   {{ .Values.external.redis.url }}
{{- end }}
{{- if .Values.postgres.enabled }}
  PgSQL  (å†…ç½®):   {{ $fullName }}-postgres:{{ .Values.postgres.service.port }}
{{- else }}
  PgSQL  (å¤–éƒ¨):   é€šè¿‡ external.postgres.dsn é…ç½®
{{- end }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ å¸¸ç”¨å‘½ä»¤:

  # æŸ¥çœ‹ Pod çŠ¶æ€
  kubectl get pods -n {{ .Release.Namespace }} -l app.kubernetes.io/instance={{ .Release.Name }}

  # æŸ¥çœ‹åº”ç”¨æ—¥å¿—
  kubectl logs -f deploy/{{ $fullName }}-app -n {{ .Release.Namespace }}

  # å‡çº§éƒ¨ç½²
  helm upgrade {{ .Release.Name }} deploy/helm/hexagon -n {{ .Release.Namespace }}

  # å¸è½½
  helm uninstall {{ .Release.Name }} -n {{ .Release.Namespace }}

{{- if not .Values.secrets.openaiApiKey }}

âš ï¸  æç¤º: æœªé…ç½® LLM API Keyï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¾ç½®:
  helm upgrade {{ .Release.Name }} deploy/helm/hexagon \
    --set secrets.openaiApiKey=sk-xxx \
    -n {{ .Release.Namespace }}
{{- end }}
